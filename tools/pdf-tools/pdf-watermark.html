<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pdfWatermark.title">PDF ì›Œí„°ë§ˆí¬ ì¶”ê°€ê¸° - ë¬´ë£Œ ì˜¨ë¼ì¸ ë„êµ¬</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="PDF íŒŒì¼ì— ì›Œí„°ë§ˆí¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. í…ìŠ¤íŠ¸ ë˜ëŠ” ì´ë¯¸ì§€ ì›Œí„°ë§ˆí¬ë¥¼ ì§€ì›í•˜ë©° ë¸Œë¼ìš°ì €ì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.">
    <meta name="keywords" content="PDF ì›Œí„°ë§ˆí¬, PDF í…ìŠ¤íŠ¸ ì¶”ê°€, PDF ì´ë¯¸ì§€ ì¶”ê°€, ì˜¨ë¼ì¸ PDF í¸ì§‘">
    <meta name="author" content="Web Tools Collection">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">
    <meta property="og:title" content="PDF ì›Œí„°ë§ˆí¬ ì¶”ê°€ê¸° - ë¬´ë£Œ ì˜¨ë¼ì¸ ë„êµ¬">
    <meta property="og:description" content="PDF íŒŒì¼ì— ì›Œí„°ë§ˆí¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. ë¸Œë¼ìš°ì €ì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë˜ì–´ ê°œì¸ì •ë³´ ë³´í˜¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.">
    <meta property="og:image" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/og-image.png">
    <meta property="og:site_name" content="ì›¹ ë„êµ¬ ëª¨ìŒ">
    <meta property="og:locale" content="ko_KR">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">
    <meta property="twitter:title" content="PDF ì›Œí„°ë§ˆí¬ ì¶”ê°€ê¸° - ë¬´ë£Œ ì˜¨ë¼ì¸ ë„êµ¬">
    <meta property="twitter:description" content="PDF íŒŒì¼ì— ì›Œí„°ë§ˆí¬ë¥¼ ì¶”ê°€í•˜ì„¸ìš”. ë¸Œë¼ìš°ì €ì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë˜ì–´ ê°œì¸ì •ë³´ ë³´í˜¸ê°€ ë³´ì¥ë©ë‹ˆë‹¤.">
    <meta property="twitter:image" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’§</text></svg>">

    <!-- Language Alternatives -->
    <link rel="alternate" hreflang="ko" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">
    <link rel="alternate" hreflang="en" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/en/tools/pdf-tools/pdf-watermark.html">
    <link rel="alternate" hreflang="x-default" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/en/tools/pdf-tools/pdf-watermark.html">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9434360911371069"
     crossorigin="anonymous"></script>
    
    <!-- Cookie Consent Management -->
    <script src="../../cookie-consent.js"></script>
    
    <!-- i18n System -->
    <script src="../../js/utils/i18n.js"></script>
    
    <!-- PDF-lib Library -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    
    <link rel="stylesheet" href="../../layout/layout.css">
    <link rel="stylesheet" href="../../layout/nav.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .upload-section {
            margin-bottom: 30px;
        }
        
        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background: linear-gradient(135deg, #e8f0ff 0%, #d8e8ff 100%);
            transform: translateY(-2px);
        }
        
        .upload-area.dragover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: white;
        }
        
        .upload-icon {
            font-size: 4em;
            margin-bottom: 20px;
            color: #667eea;
        }
        
        .upload-area.dragover .upload-icon {
            color: white;
        }
        
        .upload-text {
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .upload-subtext {
            color: #666;
            font-size: 1em;
        }
        
        .upload-area.dragover .upload-subtext {
            color: rgba(255, 255, 255, 0.8);
        }
        
        #fileInput {
            display: none;
        }
        
        .file-info {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        .file-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .file-size {
            color: #666;
            font-size: 0.9em;
        }
        
        .watermark-options {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .watermark-type {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .type-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .type-option input[type="radio"] {
            margin: 0;
        }
        
        .option-group {
            margin-bottom: 20px;
        }
        
        .option-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .option-group input,
        .option-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .option-group input[type="range"] {
            width: 100%;
        }
        
        /* ìƒ‰ìƒ ì„ íƒê¸° ìŠ¤íƒ€ì¼ */
        .color-picker-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            position: relative;
        }
        
        .color-preview {
            width: 60px;
            height: 40px;
            border-radius: 6px;
            border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .color-preview:hover {
            transform: scale(1.05);
        }
        
        .color-picker-container input[type="color"] {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: none;
            padding: 0;
            position: absolute;
            opacity: 0;
            z-index: 1;
        }
        
        .color-presets {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 5px;
        }
        
        .color-preset {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .color-preset:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .color-preset.active {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.3);
        }
        
        .color-hex-input {
            display: flex;
            align-items: center;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 0 10px;
            width: fit-content;
        }
        
        .color-hex-input span {
            font-weight: bold;
            color: #666;
            font-family: monospace;
        }
        
        .color-hex-input input {
            border: none;
            outline: none;
            padding: 8px 5px;
            font-family: monospace;
            font-size: 14px;
            width: 80px;
            text-transform: uppercase;
        }
        
        .range-value {
            display: inline-block;
            margin-left: 10px;
            font-weight: bold;
            color: #667eea;
        }
        
        .text-watermark-options,
        .image-watermark-options {
            display: none;
        }
        
        .text-watermark-options.active,
        .image-watermark-options.active {
            display: block;
        }
        
        .position-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .position-btn {
            padding: 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .position-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .position-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .process-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 200px;
        }
        
        .process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .process-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .progress-section {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .download-section {
            display: none;
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: #e8f5e8;
            border-radius: 10px;
            border: 1px solid #4caf50;
        }
        
        .download-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
        }
        
        .download-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .features-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            color: #667eea;
        }
        
        .feature-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .feature-description {
            color: #666;
            line-height: 1.5;
        }
        
        .error-message {
            display: none;
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #ef5350;
        }
        
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .language-switcher select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            color: white;
            padding: 8px 12px;
            font-size: 14px;
            width: 90px;
            text-align: center;
        }
        
        .language-switcher option {
            background: #333;
            color: white;
        }
        
        @media (max-width: 768px) {
            .main-layout {
                padding: 15px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .upload-area {
                padding: 40px 15px;
            }
            
            .features-section {
                grid-template-columns: 1fr;
            }
            
            .language-switcher {
                top: 15px;
                right: 15px;
            }
            
            .watermark-type {
                flex-direction: column;
                gap: 10px;
            }
            
            .position-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .color-picker-container {
                padding: 12px;
            }
            
            .color-presets {
                gap: 6px;
            }
            
            .color-preset {
                width: 28px;
                height: 28px;
            }
            
            .color-hex-input {
                padding: 0 8px;
            }
            
            .color-hex-input input {
                width: 70px;
                font-size: 13px;
            }
        }
        
        /* ë¯¸ë¦¬ë³´ê¸° ìŠ¤íƒ€ì¼ */
        .preview-section {
            background: #f0f4f8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 1px solid #e1e8ed;
        }
        
        .preview-section h4 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 1.1em;
        }
        
        .preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            background: #fff;
            border-radius: 8px;
            border: 2px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .preview-page {
            width: 280px;
            height: 180px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .preview-content {
            width: 100%;
            height: 100%;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .preview-text {
            color: #999;
            font-size: 12px;
            line-height: 1.6;
            margin-bottom: 10px;
            opacity: 0.7;
        }
        
        .preview-watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-watermark span {
            /* ëª¨ë“  ìŠ¤íƒ€ì¼ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì„¤ì • */
        }
        
        .preview-watermark img {
            /* ëª¨ë“  ìŠ¤íƒ€ì¼ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì„¤ì • */
        }
        
        @media (max-width: 768px) {
            .preview-page {
                width: 240px;
                height: 150px;
            }
            
            .preview-watermark span {
                /* ëª¨ë“  ìŠ¤íƒ€ì¼ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì„¤ì • */
            }
            
            .preview-watermark img {
                max-width: 60px;
                max-height: 60px;
            }
        }
        
        /* ë³´ì•ˆ ì£¼ì˜ì‚¬í•­ ìŠ¤íƒ€ì¼ */
        .security-warning {
            background: #fff3cd;
            border-left: 4px solid #ffeeba;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .security-warning h4 {
            margin-bottom: 10px;
            color: #856404;
        }
        
        .security-warning ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        
        .security-warning li {
            margin-bottom: 5px;
            color: #856404;
        }
        
        /* ì¹´ë“œ êµ¬ì¡° í†µì¼ */
        .converter-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
            margin-bottom: 30px;
        }
        
        .converter-card h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.5em;
        }
        
        .converter-card .tool-description {
            margin-bottom: 20px;
            color: #666;
            line-height: 1.5;
        }
        
        /* ì•ˆë‚´ë¬¸êµ¬ ìŠ¤íƒ€ì¼ */
        .guide-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            border: 1px solid #e9ecef;
        }
        
        .guide-section h4 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .guide-section ul {
            list-style-type: circle;
            padding-left: 20px;
        }
        
        .guide-section li {
            margin-bottom: 10px;
            color: #666;
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ í†µì¼ */
        .tool-link {
            display: inline-block;
            text-align: center;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
            margin: 5px 0;
        }
        
        .tool-link.recommended {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        
        .tool-link.recommended:hover {
            background: linear-gradient(135deg, #5561b3 0%, #634a8c 100%);
        }
        
        .tool-link:not(.recommended) {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .tool-link:not(.recommended):hover {
            background: #e1e1e1;
        }
        
        @media (max-width: 768px) {
            .security-warning,
            .guide-section {
                padding: 15px;
            }
            
            .converter-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <select id="languageSelect">
            <option value="ko" data-i18n="common.languageKo">ğŸ‡°ğŸ‡· KO</option>
            <option value="en" data-i18n="common.languageEn">ğŸ‡ºğŸ‡¸ EN</option>
        </select>
    </div>
    <div id="navbar-placeholder"></div>

    <div class="main-layout">
        <div class="container">
            <h1 data-i18n="pdfWatermark.mainTitle">ğŸ“„ PDF ì›Œí„°ë§ˆí¬ ì¶”ê°€ê¸°</h1>
            <!-- ë³´ì•ˆ ì£¼ì˜ì‚¬í•­ ì•ˆë‚´ -->
            <div class="security-warning">
                <h4 data-i18n="pdf.securityTitle">ğŸ”’ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­</h4>
                <ul>
                    <li><strong>ê°œì¸ì •ë³´ ì£¼ì˜:</strong> ë¯¼ê°í•œ ì •ë³´ê°€ í¬í•¨ëœ PDFëŠ” ì˜¨ë¼ì¸ ë³€í™˜ í”¼í•˜ê¸°</li>
                    <li><strong>íŒŒì¼ ì‚­ì œ:</strong> ë³€í™˜ í›„ ì—…ë¡œë“œëœ íŒŒì¼ì´ ìë™ ì‚­ì œë˜ëŠ”ì§€ í™•ì¸</li>
                    <li><strong>HTTPS í™•ì¸:</strong> ë³´ì•ˆ ì—°ê²°(ğŸ”’)ì´ ëœ ì‚¬ì´íŠ¸ë§Œ ì´ìš©</li>
                    <li><strong>ë°”ì´ëŸ¬ìŠ¤ ê²€ì‚¬:</strong> ë³€í™˜ëœ íŒŒì¼ ë‹¤ìš´ë¡œë“œ í›„ ê²€ì‚¬ ê¶Œì¥</li>
                </ul>
            </div>
            <div class="converter-grid">
                <div class="converter-card" style="max-width:600px;margin:0 auto;">
                    <h3 data-i18n="pdfWatermark.cardTitle">PDF ì›Œí„°ë§ˆí¬ ì¶”ê°€</h3>
                    <div class="tool-description" data-i18n="pdfWatermark.cardDesc">
                        PDF íŒŒì¼ì— í…ìŠ¤íŠ¸ ë˜ëŠ” ì´ë¯¸ì§€ ì›Œí„°ë§ˆí¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì²˜ë¦¬ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì•ˆì „í•˜ê²Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
                    </div>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">ğŸ“„</div>
                        <div class="upload-text" data-i18n="pdfWatermark.uploadText">PDF íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
                        <div class="upload-subtext" data-i18n="pdfWatermark.uploadSubtext">ì§€ì› í˜•ì‹: .pdf (ìµœëŒ€ 50MB)</div>
                        <input type="file" id="fileInput" accept=".pdf" style="display:none;" />
                        <button class="tool-link recommended" type="button" onclick="document.getElementById('fileInput').click()" data-i18n="pdfWatermark.chooseFile">íŒŒì¼ ì„ íƒ</button>
                    </div>
                    <div class="file-info" id="fileInfo">
                        <div class="file-name" id="fileName"></div>
                        <div class="file-size" id="fileSize"></div>
                    </div>
                    <div class="error-message" id="errorMessage"></div>
                    <div class="watermark-options">
                        <h3 data-i18n="pdfWatermark.watermarkOptions">ì›Œí„°ë§ˆí¬ ì˜µì…˜</h3>
                        
                        <!-- ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ -->
                        <div class="preview-section">
                            <h4 data-i18n="pdfWatermark.preview">ë¯¸ë¦¬ë³´ê¸°</h4>
                            <div class="preview-container">
                                <div class="preview-page" id="previewPage">
                                    <div class="preview-content">
                                        <div class="preview-text">Sample PDF Document</div>
                                        <div class="preview-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
                                        <div class="preview-text">Sed do eiusmod tempor incididunt ut labore et dolore magna.</div>
                                        <div class="preview-text">Ut enim ad minim veniam, quis nostrud exercitation.</div>
                                        <div class="preview-watermark" id="previewWatermark">
                                            <span id="previewText">WATERMARK</span>
                                            <img id="previewImage" style="display: none;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="watermark-type">
                            <div class="type-option">
                                <input type="radio" name="watermarkType" id="textWatermark" value="text" checked>
                                <label for="textWatermark" data-i18n="pdfWatermark.textWatermark">í…ìŠ¤íŠ¸ ì›Œí„°ë§ˆí¬</label>
                            </div>
                            <div class="type-option">
                                <input type="radio" name="watermarkType" id="imageWatermark" value="image">
                                <label for="imageWatermark" data-i18n="pdfWatermark.imageWatermark">ì´ë¯¸ì§€ ì›Œí„°ë§ˆí¬</label>
                            </div>
                        </div>
                        
                        <div class="text-watermark-options active" id="textOptions">
                            <div class="option-group">
                                <label for="watermarkText" data-i18n="pdfWatermark.watermarkText">ì›Œí„°ë§ˆí¬ í…ìŠ¤íŠ¸:</label>
                                <input type="text" id="watermarkText" placeholder="ì›Œí„°ë§ˆí¬ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" data-i18n-placeholder="pdfWatermark.textPlaceholder">
                                <small style="color: #666; font-size: 0.9em; margin-top: 5px; display: block;" data-i18n="pdfWatermark.textNote">
                                    â„¹ï¸ í•œê¸€/íŠ¹ìˆ˜ë¬¸ìëŠ” ì´ë¯¸ì§€ë¡œ ë³€í™˜ë˜ì–´ ì²˜ë¦¬ë©ë‹ˆë‹¤
                                </small>
                            </div>
                            
                            <div class="option-group">
                                <label for="textSize" data-i18n="pdfWatermark.textSize">í…ìŠ¤íŠ¸ í¬ê¸°: <span class="range-value" id="textSizeValue">36px</span></label>
                                <input type="range" id="textSize" min="12" max="72" value="36" />
                            </div>
                            
                            <div class="option-group">
                                <label for="textColor" data-i18n="pdfWatermark.textColor">í…ìŠ¤íŠ¸ ìƒ‰ìƒ:</label>
                                <div class="color-picker-container">
                                    <div class="color-preview" id="colorPreview" style="background-color: #e74c3c;"></div>
                                    <input type="color" id="textColor" value="#e74c3c" />
                                    <div class="color-presets">
                                        <div class="color-preset" data-color="#000000" style="background-color: #000000;" title="ê²€ì •"></div>
                                        <div class="color-preset" data-color="#e74c3c" style="background-color: #e74c3c;" title="ë¹¨ê°•"></div>
                                        <div class="color-preset" data-color="#3498db" style="background-color: #3498db;" title="íŒŒë‘"></div>
                                        <div class="color-preset" data-color="#2ecc71" style="background-color: #2ecc71;" title="ì´ˆë¡"></div>
                                        <div class="color-preset" data-color="#f39c12" style="background-color: #f39c12;" title="ì£¼í™©"></div>
                                        <div class="color-preset" data-color="#9b59b6" style="background-color: #9b59b6;" title="ë³´ë¼"></div>
                                        <div class="color-preset" data-color="#95a5a6" style="background-color: #95a5a6;" title="íšŒìƒ‰"></div>
                                        <div class="color-preset" data-color="#34495e" style="background-color: #34495e;" title="ë„¤ì´ë¹„"></div>
                                    </div>
                                    <div class="color-hex-input">
                                        <span>#</span>
                                        <input type="text" id="hexColorInput" value="e74c3c" maxlength="6" placeholder="ffffff">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="image-watermark-options" id="imageOptions">
                            <div class="option-group">
                                <label for="watermarkImage" data-i18n="pdfWatermark.watermarkImage">ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€:</label>
                                <input type="file" id="watermarkImage" accept="image/*" />
                            </div>
                            
                            <div class="option-group">
                                <label for="imageSize" data-i18n="pdfWatermark.imageSize">ì´ë¯¸ì§€ í¬ê¸°: <span class="range-value" id="imageSizeValue">100px</span></label>
                                <input type="range" id="imageSize" min="50" max="300" value="100" />
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label for="opacity" data-i18n="pdfWatermark.opacity">íˆ¬ëª…ë„: <span class="range-value" id="opacityValue">50%</span></label>
                            <input type="range" id="opacity" min="10" max="100" value="50" />
                        </div>
                        
                        <div class="option-group">
                            <label data-i18n="pdfWatermark.position">ìœ„ì¹˜:</label>
                            <div class="position-grid">
                                <button class="position-btn" data-position="top-left" data-i18n="pdfWatermark.topLeft">ì™¼ìª½ ìƒë‹¨</button>
                                <button class="position-btn" data-position="top-center" data-i18n="pdfWatermark.topCenter">ì¤‘ì•™ ìƒë‹¨</button>
                                <button class="position-btn" data-position="top-right" data-i18n="pdfWatermark.topRight">ì˜¤ë¥¸ìª½ ìƒë‹¨</button>
                                <button class="position-btn" data-position="center-left" data-i18n="pdfWatermark.centerLeft">ì™¼ìª½ ì¤‘ì•™</button>
                                <button class="position-btn active" data-position="center" data-i18n="pdfWatermark.center">ì¤‘ì•™</button>
                                <button class="position-btn" data-position="center-right" data-i18n="pdfWatermark.centerRight">ì˜¤ë¥¸ìª½ ì¤‘ì•™</button>
                                <button class="position-btn" data-position="bottom-left" data-i18n="pdfWatermark.bottomLeft">ì™¼ìª½ í•˜ë‹¨</button>
                                <button class="position-btn" data-position="bottom-center" data-i18n="pdfWatermark.bottomCenter">ì¤‘ì•™ í•˜ë‹¨</button>
                                <button class="position-btn" data-position="bottom-right" data-i18n="pdfWatermark.bottomRight">ì˜¤ë¥¸ìª½ í•˜ë‹¨</button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="tool-link recommended process-btn" id="processBtn" disabled data-i18n="pdfWatermark.addWatermark">ì›Œí„°ë§ˆí¬ ì¶”ê°€í•˜ê¸°</button>
                    <div class="progress-section" id="progressSection">
                        <div class="progress-text" id="progressText" data-i18n="pdfWatermark.processing">ì²˜ë¦¬ ì¤‘...</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                    <div class="download-section" id="downloadSection">
                        <h3 data-i18n="pdfWatermark.complete">âœ… ì™„ë£Œ!</h3>
                        <p data-i18n="pdfWatermark.completeDesc">PDF íŒŒì¼ì— ì›Œí„°ë§ˆí¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                        <a href="#" class="tool-link recommended download-btn" id="downloadBtn" data-i18n="pdfWatermark.downloadBtn">ğŸ“¥ PDF ë‹¤ìš´ë¡œë“œ</a>
                        <button class="tool-link" type="button" onclick="window.location.reload()" data-i18n="pdfWatermark.clearResults">ğŸ—‘ï¸ ê²°ê³¼ ì§€ìš°ê¸°</button>
                    </div>
                </div>
            </div>
            <div class="guide-section">
                <h4 data-i18n="pdfWatermark.guideTitle">ğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ</h4>
                <ul>
                    <li>PDF íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ëª¨ë“  í˜ì´ì§€ì— ì›Œí„°ë§ˆí¬ê°€ ì¶”ê°€ë©ë‹ˆë‹¤.</li>
                    <li>í…ìŠ¤íŠ¸/ì´ë¯¸ì§€, í¬ê¸°, ìƒ‰ìƒ, ìœ„ì¹˜, íˆ¬ëª…ë„ ë“± ë‹¤ì–‘í•œ ì˜µì…˜ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>ì™„ë£Œ í›„ PDFë¥¼ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                </ul>
            </div>
            <div class="features-section">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ”’</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.privacy.title">ê°œì¸ì •ë³´ ë³´í˜¸</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.privacy.description">ëª¨ë“  ì²˜ë¦¬ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ìˆ˜í–‰ë˜ì–´ íŒŒì¼ì´ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">âš¡</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.fast.title">ë¹ ë¥¸ ì²˜ë¦¬</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.fast.description">ìµœì í™”ëœ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¹ ë¥´ê³  ì •í™•í•œ ì›Œí„°ë§ˆí¬ ì¶”ê°€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ğŸ¨</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.customizable.title">ë‹¤ì–‘í•œ ì˜µì…˜</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.customizable.description">í…ìŠ¤íŠ¸ì™€ ì´ë¯¸ì§€ ì›Œí„°ë§ˆí¬, ìœ„ì¹˜, í¬ê¸°, íˆ¬ëª…ë„ ë“±ì„ ììœ ë¡­ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">ğŸ“±</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.responsive.title">ëª¨ë“  ê¸°ê¸° ì§€ì›</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.responsive.description">PC, íƒœë¸”ë¦¿, ëª¨ë°”ì¼ ë“± ëª¨ë“  ê¸°ê¸°ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class PDFWatermarkTool {
            constructor() {
                this.currentFile = null;
                this.selectedPosition = 'center';
                this.initializeElements();
                this.bindEvents();
                this.updateRangeValues();
                this.updateColorPreview(); // ì´ˆê¸° ìƒ‰ìƒ ë¯¸ë¦¬ë³´ê¸° ì„¤ì •
                this.updatePreview(); // ì´ˆê¸° ë¯¸ë¦¬ë³´ê¸° ì„¤ì •
            }
            
            initializeElements() {
                // ê¸°ë³¸ ìš”ì†Œë“¤
                this.uploadArea = document.getElementById('uploadArea');
                this.fileInput = document.getElementById('fileInput');
                this.fileInfo = document.getElementById('fileInfo');
                this.fileName = document.getElementById('fileName');
                this.fileSize = document.getElementById('fileSize');
                this.processBtn = document.getElementById('processBtn');
                this.progressSection = document.getElementById('progressSection');
                this.progressText = document.getElementById('progressText');
                this.progressFill = document.getElementById('progressFill');
                this.downloadSection = document.getElementById('downloadSection');
                this.downloadBtn = document.getElementById('downloadBtn');
                this.errorMessage = document.getElementById('errorMessage');
                
                // Watermark option elements
                this.textWatermark = document.getElementById('textWatermark');
                this.imageWatermark = document.getElementById('imageWatermark');
                this.textOptions = document.getElementById('textOptions');
                this.imageOptions = document.getElementById('imageOptions');
                this.watermarkText = document.getElementById('watermarkText');
                this.textSize = document.getElementById('textSize');
                this.textColor = document.getElementById('textColor');
                this.watermarkImage = document.getElementById('watermarkImage');
                this.imageSize = document.getElementById('imageSize');
                this.opacity = document.getElementById('opacity');
                
                // Position buttons
                this.positionButtons = document.querySelectorAll('.position-btn');
                
                // Preview elements
                this.previewWatermark = document.getElementById('previewWatermark');
                this.previewText = document.getElementById('previewText');
                this.previewImage = document.getElementById('previewImage');
                
                // Color picker elements
                this.colorPreview = document.getElementById('colorPreview');
                this.hexColorInput = document.getElementById('hexColorInput');
                this.colorPresets = document.querySelectorAll('.color-preset');
                
                // ì´ˆê¸°í™” í™•ì¸
                console.log('Elements initialized:', {
                    textSize: !!this.textSize,
                    imageSize: !!this.imageSize,
                    opacity: !!this.opacity,
                    previewText: !!this.previewText,
                    previewImage: !!this.previewImage
                });
            }
            
            bindEvents() {
                // File input events
                this.uploadArea.addEventListener('click', () => this.fileInput.click());
                this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                
                // Drag and drop events
                this.uploadArea.addEventListener('dragover', (e) => this.handleDragOver(e));
                this.uploadArea.addEventListener('dragleave', (e) => this.handleDragLeave(e));
                this.uploadArea.addEventListener('drop', (e) => this.handleDrop(e));
                
                // Watermark type change
                this.textWatermark.addEventListener('change', () => {
                    this.toggleWatermarkType();
                    this.updatePreview();
                });
                this.imageWatermark.addEventListener('change', () => {
                    this.toggleWatermarkType();
                    this.updatePreview();
                });
                
                // Text input changes
                this.watermarkText.addEventListener('input', () => this.updatePreview());
                this.textColor.addEventListener('input', () => {
                    this.updateColorPreview();
                    this.updatePreview();
                });
                this.watermarkImage.addEventListener('change', () => this.updatePreview());
                
                // Color picker events
                this.colorPreview.addEventListener('click', () => this.textColor.click());
                this.hexColorInput.addEventListener('input', (e) => this.handleHexInput(e));
                this.colorPresets.forEach(preset => {
                    preset.addEventListener('click', (e) => this.selectColorPreset(e));
                });
                
                // Range inputs - ì•ˆì „í•˜ê²Œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                if (this.textSize) {
                    this.textSize.addEventListener('input', (e) => {
                        console.log('Text size changed:', e.target.value);
                        this.updateRangeValues();
                        this.updatePreview();
                    });
                }
                if (this.imageSize) {
                    this.imageSize.addEventListener('input', (e) => {
                        console.log('Image size changed:', e.target.value);
                        this.updateRangeValues();
                        this.updatePreview();
                    });
                }
                if (this.opacity) {
                    this.opacity.addEventListener('input', (e) => {
                        console.log('Opacity changed:', e.target.value);
                        this.updateRangeValues();
                        this.updatePreview();
                    });
                }
                
                // Position buttons
                this.positionButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.selectPosition(btn);
                        this.updatePreview();
                    });
                });
                
                // Process button
                this.processBtn.addEventListener('click', () => this.processWatermark());
            }
            
            updateRangeValues() {
                // ì•ˆì „í•˜ê²Œ ìš”ì†Œë¥¼ ì°¾ê³  ì—…ë°ì´íŠ¸
                const textSizeValue = document.getElementById('textSizeValue');
                const imageSizeValue = document.getElementById('imageSizeValue');
                const opacityValue = document.getElementById('opacityValue');
                
                if (textSizeValue && this.textSize) {
                    textSizeValue.textContent = this.textSize.value + 'px';
                }
                if (imageSizeValue && this.imageSize) {
                    imageSizeValue.textContent = this.imageSize.value + 'px';
                }
                if (opacityValue && this.opacity) {
                    opacityValue.textContent = this.opacity.value + '%';
                }
            }
            
            updatePreview() {
                const isTextWatermark = this.textWatermark.checked;
                
                if (isTextWatermark) {
                    this.updateTextPreview();
                } else {
                    this.updateImagePreview();
                }
                
                this.updateWatermarkPosition();
            }
            
            updateTextPreview() {
                const text = this.watermarkText.value || 'WATERMARK';
                const fontSize = parseInt(this.textSize.value);
                const color = this.textColor.value;
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                // ë¯¸ë¦¬ë³´ê¸°ìš© í¬ê¸° ì¡°ì • (ì‹¤ì œ í¬ê¸°ì˜ 60% ì •ë„ë¡œ ìŠ¤ì¼€ì¼ë§)
                const previewFontSize = Math.max(fontSize * 0.5, 12);
                
                console.log('UpdateTextPreview called:', { text, fontSize, previewFontSize, color, opacity });
                
                // ì™„ì „íˆ ìƒˆë¡œìš´ span ìš”ì†Œ ìƒì„±
                const newSpan = document.createElement('span');
                newSpan.id = 'previewText';
                newSpan.textContent = text;
                
                // ì§ì ‘ ìŠ¤íƒ€ì¼ ì ìš© (CSS ìš°ì„ ìˆœìœ„ ë¬´ì‹œ)
                newSpan.style.fontFamily = 'Arial, sans-serif';
                newSpan.style.fontSize = `${previewFontSize}px`;
                newSpan.style.color = color;
                newSpan.style.opacity = opacity;
                newSpan.style.whiteSpace = 'nowrap';
                newSpan.style.textShadow = '1px 1px 3px rgba(0,0,0,0.3)';
                newSpan.style.fontWeight = 'bold';
                newSpan.style.display = 'block';
                newSpan.style.position = 'absolute';
                newSpan.style.top = '0';
                newSpan.style.left = '0';
                newSpan.style.width = '100%';
                newSpan.style.height = '100%';
                newSpan.style.display = 'flex';
                newSpan.style.alignItems = 'center';
                newSpan.style.justifyContent = 'center';
                
                // ê¸°ì¡´ ìš”ì†Œ ì œê±°í•˜ê³  ìƒˆ ìš”ì†Œ ì¶”ê°€
                this.previewText.parentNode.replaceChild(newSpan, this.previewText);
                this.previewText = newSpan;
                
                this.previewImage.style.display = 'none';
                
                console.log('Text preview updated with new element');
            }
            
            updateImagePreview() {
                const imageFile = this.watermarkImage.files[0];
                const imageSize = parseInt(this.imageSize.value);
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                console.log('UpdateImagePreview called:', { imageFile: !!imageFile, imageSize, opacity });
                
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        // ë¯¸ë¦¬ë³´ê¸°ìš© í¬ê¸° ì¡°ì • (ì‹¤ì œ í¬ê¸°ì˜ 50% ì •ë„ë¡œ ìŠ¤ì¼€ì¼ë§)
                        const previewSize = Math.max(imageSize * 0.5, 30);
                        
                        console.log('Image preview size:', previewSize);
                        
                        // ì™„ì „íˆ ìƒˆë¡œìš´ img ìš”ì†Œ ìƒì„±
                        const newImg = document.createElement('img');
                        newImg.id = 'previewImage';
                        newImg.src = e.target.result;
                        
                        // ì§ì ‘ ìŠ¤íƒ€ì¼ ì ìš©
                        newImg.setAttribute('style', `
                            width: ${previewSize}px;
                            height: ${previewSize}px;
                            opacity: ${opacity};
                            display: block;
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                        `);
                        
                        // ê¸°ì¡´ ìš”ì†Œ ì œê±°í•˜ê³  ìƒˆ ìš”ì†Œ ì¶”ê°€
                        this.previewImage.parentNode.replaceChild(newImg, this.previewImage);
                        this.previewImage = newImg;
                        
                        this.previewText.style.display = 'none';
                        
                        console.log('Image preview updated with new element');
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    this.previewImage.style.display = 'none';
                    this.previewText.style.display = 'none';
                }
            }
            
            updateWatermarkPosition() {
                const position = this.selectedPosition;
                const container = this.previewWatermark;
                
                // ê¸°ë³¸ê°’ ì´ˆê¸°í™”
                container.style.top = '50%';
                container.style.left = '50%';
                container.style.transform = 'translate(-50%, -50%) rotate(-45deg)';
                
                // ìœ„ì¹˜ë³„ ì¡°ì •
                switch (position) {
                    case 'top-left':
                        container.style.top = '25%';
                        container.style.left = '25%';
                        break;
                    case 'top-center':
                        container.style.top = '25%';
                        container.style.left = '50%';
                        break;
                    case 'top-right':
                        container.style.top = '25%';
                        container.style.left = '75%';
                        break;
                    case 'center-left':
                        container.style.top = '50%';
                        container.style.left = '25%';
                        break;
                    case 'center':
                        container.style.top = '50%';
                        container.style.left = '50%';
                        break;
                    case 'center-right':
                        container.style.top = '50%';
                        container.style.left = '75%';
                        break;
                    case 'bottom-left':
                        container.style.top = '75%';
                        container.style.left = '25%';
                        break;
                    case 'bottom-center':
                        container.style.top = '75%';
                        container.style.left = '50%';
                        break;
                    case 'bottom-right':
                        container.style.top = '75%';
                        container.style.left = '75%';
                        break;
                }
            }
            
            toggleWatermarkType() {
                if (this.textWatermark.checked) {
                    this.textOptions.classList.add('active');
                    this.imageOptions.classList.remove('active');
                } else {
                    this.textOptions.classList.remove('active');
                    this.imageOptions.classList.add('active');
                }
            }
            
            selectPosition(btn) {
                this.positionButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                this.selectedPosition = btn.dataset.position;
            }
            
            // ìƒ‰ìƒ ê´€ë ¨ ë©”ì†Œë“œë“¤
            updateColorPreview() {
                const color = this.textColor.value;
                this.colorPreview.style.backgroundColor = color;
                this.hexColorInput.value = color.substring(1);
                this.updateColorPresetSelection(color);
            }
            
            updateColorPresetSelection(color) {
                this.colorPresets.forEach(preset => {
                    preset.classList.remove('active');
                    if (preset.dataset.color.toLowerCase() === color.toLowerCase()) {
                        preset.classList.add('active');
                    }
                });
            }
            
            selectColorPreset(e) {
                const color = e.target.dataset.color;
                this.textColor.value = color;
                this.updateColorPreview();
                this.updatePreview();
            }
            
            handleHexInput(e) {
                let hex = e.target.value.replace(/[^0-9a-fA-F]/g, '');
                if (hex.length > 6) {
                    hex = hex.substring(0, 6);
                }
                e.target.value = hex;
                
                if (hex.length === 6) {
                    const color = '#' + hex;
                    this.textColor.value = color;
                    this.colorPreview.style.backgroundColor = color;
                    this.updateColorPresetSelection(color);
                    this.updatePreview();
                }
            }
            
            handleDragOver(e) {
                e.preventDefault();
                this.uploadArea.classList.add('dragover');
            }
            
            handleDragLeave(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
            }
            
            handleDrop(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    this.processFile(files[0]);
                }
            }
            
            handleFileSelect(e) {
                const file = e.target.files[0];
                if (file) {
                    this.processFile(file);
                }
            }
            
            processFile(file) {
                this.hideError();
                
                // Validate file type
                if (!file.type.includes('pdf')) {
                    this.showError('PDF íŒŒì¼ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                    return;
                }
                
                // Validate file size (50MB limit)
                if (file.size > 50 * 1024 * 1024) {
                    this.showError('íŒŒì¼ í¬ê¸°ê°€ 50MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤.');
                    return;
                }
                
                this.currentFile = file;
                this.displayFileInfo(file);
                this.processBtn.disabled = false;
            }
            
            displayFileInfo(file) {
                this.fileName.textContent = file.name;
                this.fileSize.textContent = this.formatFileSize(file.size);
                this.fileInfo.style.display = 'block';
            }
            
            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            showError(message) {
                this.errorMessage.textContent = message;
                this.errorMessage.style.display = 'block';
            }
            
            hideError() {
                this.errorMessage.style.display = 'none';
            }
            
            updateProgress(percent, text) {
                this.progressFill.style.width = percent + '%';
                this.progressText.textContent = text;
            }
            
            async processWatermark() {
                if (!this.currentFile) return;
                
                this.processBtn.disabled = true;
                this.progressSection.style.display = 'block';
                this.downloadSection.style.display = 'none';
                this.hideError();
                
                try {
                    this.updateProgress(10, 'PDF íŒŒì¼ ë¡œë”© ì¤‘...');
                    
                    // Read PDF file
                    const pdfBytes = await this.readFile(this.currentFile);
                    
                    this.updateProgress(30, 'PDF ë¬¸ì„œ íŒŒì‹± ì¤‘...');
                    
                    // Load PDF document
                    const pdfDoc = await PDFLib.PDFDocument.load(pdfBytes);
                    
                    this.updateProgress(50, 'ì›Œí„°ë§ˆí¬ ì¶”ê°€ ì¤‘...');
                    
                    // Add watermark to all pages
                    if (this.textWatermark.checked) {
                        await this.addTextWatermark(pdfDoc);
                    } else {
                        await this.addImageWatermark(pdfDoc);
                    }
                    
                    this.updateProgress(80, 'PDF ìƒì„± ì¤‘...');
                    
                    // Save PDF
                    const pdfBytesWithWatermark = await pdfDoc.save();
                    
                    this.updateProgress(100, 'ì™„ë£Œ!');
                    
                    // Show download section
                    this.showDownloadSection(pdfBytesWithWatermark);
                    
                } catch (error) {
                    console.error('ì›Œí„°ë§ˆí¬ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                    this.showError('ì›Œí„°ë§ˆí¬ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                } finally {
                    this.processBtn.disabled = false;
                    this.progressSection.style.display = 'none';
                }
            }
            
            async readFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(new Uint8Array(e.target.result));
                    reader.onerror = () => reject(new Error('íŒŒì¼ ì½ê¸° ì‹¤íŒ¨'));
                    reader.readAsArrayBuffer(file);
                });
            }
            
            async addTextWatermark(pdfDoc) {
                const pages = pdfDoc.getPages();
                const text = this.watermarkText.value || 'WATERMARK';
                const fontSize = parseInt(this.textSize.value);
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                // Parse color
                const color = this.hexToRgb(this.textColor.value);
                
                // Check if text contains non-ASCII characters (like Korean)
                const hasNonAscii = /[^\x00-\x7F]/.test(text);
                
                let font;
                try {
                    if (hasNonAscii) {
                        // For non-ASCII text, try to use a Unicode-compatible approach
                        // Since we can't easily embed custom fonts, we'll use a different method
                        await this.addTextAsImageWatermark(pdfDoc, text, fontSize, color, opacity);
                        return;
                    } else {
                        // For ASCII text, use standard font
                        font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);
                    }
                } catch (error) {
                    console.warn('Font embedding failed, using default font:', error);
                    font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);
                }
                
                for (const page of pages) {
                    const { width, height } = page.getSize();
                    const position = this.calculatePosition(width, height, fontSize, text.length);
                    
                    page.drawText(text, {
                        x: position.x,
                        y: position.y,
                        size: fontSize * 5,
                        font: font,
                        color: PDFLib.rgb(color.r / 255, color.g / 255, color.b / 255),
                        opacity: opacity,
                        rotate: PDFLib.degrees(45)
                    });
                }
            }
            
            async addTextAsImageWatermark(pdfDoc, text, fontSize, color, opacity) {
                // Create a canvas to render text as image for non-ASCII characters
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Set up canvas size and font
                ctx.font = `${fontSize * 5}px Arial, sans-serif`;
                const textMetrics = ctx.measureText(text);
                const textWidth = textMetrics.width;
                const textHeight = fontSize;
                
                // Set canvas size with some padding
                canvas.width = textWidth + 40;
                canvas.height = textHeight + 40;
                
                // Clear canvas and set font again (canvas size change resets context)
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.font = `${fontSize * 5}px Arial, sans-serif`;
                ctx.fillStyle = `rgb(${color.r}, ${color.g}, ${color.b})`;
                ctx.textBaseline = 'middle';
                ctx.textAlign = 'center';
                
                // Draw text on canvas
                ctx.fillText(text, canvas.width / 2, canvas.height / 2);
                
                // Convert canvas to PNG data
                const pngDataUrl = canvas.toDataURL('image/png');
                const pngData = pngDataUrl.split(',')[1];
                const pngBytes = Uint8Array.from(atob(pngData), c => c.charCodeAt(0));
                
                // Embed the PNG image
                const image = await pdfDoc.embedPng(pngBytes);
                
                // Add image to all pages
                const pages = pdfDoc.getPages();
                for (const page of pages) {
                    const { width, height } = page.getSize();
                    const position = this.calculatePosition(width, height, canvas.width, canvas.height);
                    
                    page.drawImage(image, {
                        x: position.x,
                        y: position.y,
                        width: canvas.width,
                        height: canvas.height,
                        opacity: opacity,
                        rotate: PDFLib.degrees(45)
                    });
                }
            }
            
            async addImageWatermark(pdfDoc) {
                const imageFile = this.watermarkImage.files[0];
                if (!imageFile) {
                    throw new Error('ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                }
                
                const imageBytes = await this.readFile(imageFile);
                let image;
                
                if (imageFile.type.includes('png')) {
                    image = await pdfDoc.embedPng(imageBytes);
                } else if (imageFile.type.includes('jpeg') || imageFile.type.includes('jpg')) {
                    image = await pdfDoc.embedJpg(imageBytes);
                } else {
                    throw new Error('PNG ë˜ëŠ” JPG ì´ë¯¸ì§€ë§Œ ì§€ì›ë©ë‹ˆë‹¤.');
                }
                
                const pages = pdfDoc.getPages();
                const imageSize = parseInt(this.imageSize.value);
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                for (const page of pages) {
                    const { width, height } = page.getSize();
                    const position = this.calculatePosition(width, height, imageSize, imageSize);
                    
                    page.drawImage(image, {
                        x: position.x,
                        y: position.y,
                        width: imageSize,
                        height: imageSize,
                        opacity: opacity
                    });
                }
            }
            
            calculatePosition(pageWidth, pageHeight, elementWidth, elementHeight) {
                const positions = {
                    'top-left': { x: 50, y: pageHeight - elementHeight - 50 },
                    'top-center': { x: (pageWidth - elementWidth) / 2, y: pageHeight - elementHeight - 50 },
                    'top-right': { x: pageWidth - elementWidth - 50, y: pageHeight - elementHeight - 50 },
                    'center-left': { x: 50, y: (pageHeight - elementHeight) / 2 },
                    'center': { x: (pageWidth - elementWidth) / 2, y: (pageHeight - elementHeight) / 2 },
                    'center-right': { x: pageWidth - elementWidth - 50, y: (pageHeight - elementHeight) / 2 },
                    'bottom-left': { x: 50, y: 50 },
                    'bottom-center': { x: (pageWidth - elementWidth) / 2, y: 50 },
                    'bottom-right': { x: pageWidth - elementWidth - 50, y: 50 }
                };
                
                return positions[this.selectedPosition] || positions['center'];
            }
            
            hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : { r: 255, g: 0, b: 0 };
            }
            
            showDownloadSection(pdfBytes) {
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                const fileName = this.currentFile.name.replace(/\.pdf$/i, '_watermarked.pdf');
                
                this.downloadBtn.href = url;
                this.downloadBtn.download = fileName;
                this.downloadSection.style.display = 'block';
                
                // Clean up URL after download
                this.downloadBtn.addEventListener('click', () => {
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                });
            }
        }
        
        // Initialize tool
        document.addEventListener('DOMContentLoaded', () => {
            new PDFWatermarkTool();
        });
        
        // Mobile menu toggle
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }
        
        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            const navBar = document.querySelector('.nav-bar');
            const navLinks = document.getElementById('navLinks');
            if (!navBar.contains(e.target) && navLinks.classList.contains('active')) {
                navLinks.classList.remove('active');
            }
        });
        
        // Close menu when window is resized
        window.addEventListener('resize', function() {
            const navLinks = document.getElementById('navLinks');
            if (window.innerWidth > 768) {
                navLinks.classList.remove('active');
            }
        });
    </script>
    <script src="../../js/utils/nav-loader.js"></script>
</body>
</html>