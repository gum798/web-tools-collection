<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pdfWatermark.title">PDF ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞ÄÍ∏∞ - Î¨¥Î£å Ïò®ÎùºÏù∏ ÎèÑÍµ¨</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="PDF ÌååÏùºÏóê ÏõåÌÑ∞ÎßàÌÅ¨Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî. ÌÖçÏä§Ìä∏ ÎòêÎäî Ïù¥ÎØ∏ÏßÄ ÏõåÌÑ∞ÎßàÌÅ¨Î•º ÏßÄÏõêÌïòÎ©∞ Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏïàÏ†ÑÌïòÍ≤å Ï≤òÎ¶¨Îê©ÎãàÎã§.">
    <meta name="keywords" content="PDF ÏõåÌÑ∞ÎßàÌÅ¨, PDF ÌÖçÏä§Ìä∏ Ï∂îÍ∞Ä, PDF Ïù¥ÎØ∏ÏßÄ Ï∂îÍ∞Ä, Ïò®ÎùºÏù∏ PDF Ìé∏Ïßë">
    <meta name="author" content="Web Tools Collection">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">
    <meta property="og:title" content="PDF ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞ÄÍ∏∞ - Î¨¥Î£å Ïò®ÎùºÏù∏ ÎèÑÍµ¨">
    <meta property="og:description" content="PDF ÌååÏùºÏóê ÏõåÌÑ∞ÎßàÌÅ¨Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî. Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏïàÏ†ÑÌïòÍ≤å Ï≤òÎ¶¨ÎêòÏñ¥ Í∞úÏù∏Ï†ïÎ≥¥ Î≥¥Ìò∏Í∞Ä Î≥¥Ïû•Îê©ÎãàÎã§.">
    <meta property="og:image" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/og-image.png">
    <meta property="og:site_name" content="Ïõπ ÎèÑÍµ¨ Î™®Ïùå">
    <meta property="og:locale" content="ko_KR">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">
    <meta property="twitter:title" content="PDF ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞ÄÍ∏∞ - Î¨¥Î£å Ïò®ÎùºÏù∏ ÎèÑÍµ¨">
    <meta property="twitter:description" content="PDF ÌååÏùºÏóê ÏõåÌÑ∞ÎßàÌÅ¨Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî. Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏïàÏ†ÑÌïòÍ≤å Ï≤òÎ¶¨ÎêòÏñ¥ Í∞úÏù∏Ï†ïÎ≥¥ Î≥¥Ìò∏Í∞Ä Î≥¥Ïû•Îê©ÎãàÎã§.">
    <meta property="twitter:image" content="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíß</text></svg>">

    <!-- Language Alternatives -->
    <link rel="alternate" hreflang="ko" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/tools/pdf-tools/pdf-watermark.html">
    <link rel="alternate" hreflang="en" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/en/tools/pdf-tools/pdf-watermark.html">
    <link rel="alternate" hreflang="x-default" href="https://web-tools-collection-git-main-seo-junghwas-projects.vercel.app/en/tools/pdf-tools/pdf-watermark.html">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9434360911371069"
     crossorigin="anonymous"></script>
    
    <!-- Cookie Consent Management -->
    <script src="../../cookie-consent.js"></script>
    
    <!-- i18n System -->
    <script src="../../js/utils/i18n.js"></script>
    
    <!-- PDF-lib Library -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    
    <link rel="stylesheet" href="../../layout/layout.css">
    <link rel="stylesheet" href="../../layout/nav.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .upload-section {
            margin-bottom: 30px;
        }
        
        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-area:hover {
            background: linear-gradient(135deg, #e8f0ff 0%, #d8e8ff 100%);
            transform: translateY(-2px);
        }
        
        .upload-area.dragover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: white;
        }
        
        .upload-icon {
            font-size: 4em;
            margin-bottom: 20px;
            color: #667eea;
        }
        
        .upload-area.dragover .upload-icon {
            color: white;
        }
        
        .upload-text {
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .upload-subtext {
            color: #666;
            font-size: 1em;
        }
        
        .upload-area.dragover .upload-subtext {
            color: rgba(255, 255, 255, 0.8);
        }
        
        #fileInput {
            display: none;
        }
        
        .file-info {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        .file-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .file-size {
            color: #666;
            font-size: 0.9em;
        }
        
        .watermark-options {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .watermark-type {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .type-option {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .type-option input[type="radio"] {
            margin: 0;
        }
        
        .option-group {
            margin-bottom: 20px;
        }
        
        .option-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        .option-group input,
        .option-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .option-group input[type="range"] {
            width: 100%;
        }
        
        /* ÏÉâÏÉÅ ÏÑ†ÌÉùÍ∏∞ Ïä§ÌÉÄÏùº */
        .color-picker-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            position: relative;
        }
        
        .color-preview {
            width: 60px;
            height: 40px;
            border-radius: 6px;
            border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .color-preview:hover {
            transform: scale(1.05);
        }
        
        .color-picker-container input[type="color"] {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: none;
            padding: 0;
            position: absolute;
            opacity: 0;
            z-index: 1;
        }
        
        .color-presets {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 5px;
        }
        
        .color-preset {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .color-preset:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .color-preset.active {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.3);
        }
        
        .color-hex-input {
            display: flex;
            align-items: center;
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 0 10px;
            width: fit-content;
        }
        
        .color-hex-input span {
            font-weight: bold;
            color: #666;
            font-family: monospace;
        }
        
        .color-hex-input input {
            border: none;
            outline: none;
            padding: 8px 5px;
            font-family: monospace;
            font-size: 14px;
            width: 80px;
            text-transform: uppercase;
        }
        
        .range-value {
            display: inline-block;
            margin-left: 10px;
            font-weight: bold;
            color: #667eea;
        }
        
        .text-watermark-options,
        .image-watermark-options {
            display: none;
        }
        
        .text-watermark-options.active,
        .image-watermark-options.active {
            display: block;
        }
        
        .position-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .position-btn {
            padding: 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .position-btn:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .position-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .process-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 200px;
        }
        
        .process-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .process-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .progress-section {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .download-section {
            display: none;
            text-align: center;
            margin: 30px 0;
            padding: 25px;
            background: #e8f5e8;
            border-radius: 10px;
            border: 1px solid #4caf50;
        }
        
        .download-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
        }
        
        .download-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .features-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .feature-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e9ecef;
        }
        
        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
            color: #667eea;
        }
        
        .feature-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .feature-description {
            color: #666;
            line-height: 1.5;
        }
        
        .error-message {
            display: none;
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #ef5350;
        }
        
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .language-switcher select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            color: white;
            padding: 8px 12px;
            font-size: 14px;
            width: 90px;
            text-align: center;
        }
        
        .language-switcher option {
            background: #333;
            color: white;
        }
        
        @media (max-width: 768px) {
            .main-layout {
                padding: 15px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .upload-area {
                padding: 40px 15px;
            }
            
            .features-section {
                grid-template-columns: 1fr;
            }
            
            .language-switcher {
                top: 15px;
                right: 15px;
            }
            
            .watermark-type {
                flex-direction: column;
                gap: 10px;
            }
            
            .position-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .color-picker-container {
                padding: 12px;
            }
            
            .color-presets {
                gap: 6px;
            }
            
            .color-preset {
                width: 28px;
                height: 28px;
            }
            
            .color-hex-input {
                padding: 0 8px;
            }
            
            .color-hex-input input {
                width: 70px;
                font-size: 13px;
            }
        }
        
        /* ÎØ∏Î¶¨Î≥¥Í∏∞ Ïä§ÌÉÄÏùº */
        .preview-section {
            background: #f0f4f8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 1px solid #e1e8ed;
        }
        
        .preview-section h4 {
            margin: 0 0 15px 0;
            color: #333;
            font-size: 1.1em;
        }
        
        .preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            background: #fff;
            border-radius: 8px;
            border: 2px solid #ddd;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .preview-page {
            width: 280px;
            height: 180px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .preview-content {
            width: 100%;
            height: 100%;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .preview-text {
            color: #999;
            font-size: 12px;
            line-height: 1.6;
            margin-bottom: 10px;
            opacity: 0.7;
        }
        
        .preview-watermark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview-watermark span {
            /* Î™®Îì† Ïä§ÌÉÄÏùºÏùÄ JavaScriptÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÑ§Ï†ï */
        }
        
        .preview-watermark img {
            /* Î™®Îì† Ïä§ÌÉÄÏùºÏùÄ JavaScriptÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÑ§Ï†ï */
        }
        
        @media (max-width: 768px) {
            .preview-page {
                width: 240px;
                height: 150px;
            }
            
            .preview-watermark span {
                /* Î™®Îì† Ïä§ÌÉÄÏùºÏùÄ JavaScriptÏóêÏÑú ÎèôÏ†ÅÏúºÎ°ú ÏÑ§Ï†ï */
            }
            
            .preview-watermark img {
                max-width: 60px;
                max-height: 60px;
            }
        }
        
        /* Î≥¥Ïïà Ï£ºÏùòÏÇ¨Ìï≠ Ïä§ÌÉÄÏùº */
        .security-warning {
            background: #fff3cd;
            border-left: 4px solid #ffeeba;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .security-warning h4 {
            margin-bottom: 10px;
            color: #856404;
        }
        
        .security-warning ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        
        .security-warning li {
            margin-bottom: 5px;
            color: #856404;
        }
        
        /* Ïπ¥Îìú Íµ¨Ï°∞ ÌÜµÏùº */
        .converter-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
            margin-bottom: 30px;
        }
        
        .converter-card h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 1.5em;
        }
        
        .converter-card .tool-description {
            margin-bottom: 20px;
            color: #666;
            line-height: 1.5;
        }
        
        /* ÏïàÎÇ¥Î¨∏Íµ¨ Ïä§ÌÉÄÏùº */
        .guide-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 30px 0;
            border: 1px solid #e9ecef;
        }
        
        .guide-section h4 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .guide-section ul {
            list-style-type: circle;
            padding-left: 20px;
        }
        
        .guide-section li {
            margin-bottom: 10px;
            color: #666;
        }
        
        /* Î≤ÑÌäº Ïä§ÌÉÄÏùº ÌÜµÏùº */
        .tool-link {
            display: inline-block;
            text-align: center;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
            margin: 5px 0;
        }
        
        .tool-link.recommended {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        
        .tool-link.recommended:hover {
            background: linear-gradient(135deg, #5561b3 0%, #634a8c 100%);
        }
        
        .tool-link:not(.recommended) {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .tool-link:not(.recommended):hover {
            background: #e1e1e1;
        }
        
        @media (max-width: 768px) {
            .security-warning,
            .guide-section {
                padding: 15px;
            }
            
            .converter-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <select id="languageSelect">
            <option value="ko" data-i18n="common.languageKo">üá∞üá∑ KO</option>
            <option value="en" data-i18n="common.languageEn">üá∫üá∏ EN</option>
        </select>
    </div>
    <div id="navbar-placeholder"></div>

    <div class="main-layout">
        <div class="container">
            <h1 data-i18n="pdfWatermark.mainTitle">üìÑ PDF ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞ÄÍ∏∞</h1>
            <!-- Î≥¥Ïïà Ï£ºÏùòÏÇ¨Ìï≠ ÏïàÎÇ¥ -->
            <div class="security-warning">
                <h4 data-i18n="pdf.securityTitle">üîí Î≥¥Ïïà Ï£ºÏùòÏÇ¨Ìï≠</h4>
                <ul>
                    <li><strong>Í∞úÏù∏Ï†ïÎ≥¥ Ï£ºÏùò:</strong> ÎØºÍ∞êÌïú Ï†ïÎ≥¥Í∞Ä Ìè¨Ìï®Îêú PDFÎäî Ïò®ÎùºÏù∏ Î≥ÄÌôò ÌîºÌïòÍ∏∞</li>
                    <li><strong>ÌååÏùº ÏÇ≠Ï†ú:</strong> Î≥ÄÌôò ÌõÑ ÏóÖÎ°úÎìúÎêú ÌååÏùºÏù¥ ÏûêÎèô ÏÇ≠Ï†úÎêòÎäîÏßÄ ÌôïÏù∏</li>
                    <li><strong>HTTPS ÌôïÏù∏:</strong> Î≥¥Ïïà Ïó∞Í≤∞(üîí)Ïù¥ Îêú ÏÇ¨Ïù¥Ìä∏Îßå Ïù¥Ïö©</li>
                    <li><strong>Î∞îÏù¥Îü¨Ïä§ Í≤ÄÏÇ¨:</strong> Î≥ÄÌôòÎêú ÌååÏùº Îã§Ïö¥Î°úÎìú ÌõÑ Í≤ÄÏÇ¨ Í∂åÏû•</li>
                </ul>
            </div>
            <div class="converter-grid">
                <div class="converter-card" style="max-width:600px;margin:0 auto;">
                    <h3 data-i18n="pdfWatermark.cardTitle">PDF ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞Ä</h3>
                    <div class="tool-description" data-i18n="pdfWatermark.cardDesc">
                        PDF ÌååÏùºÏóê ÌÖçÏä§Ìä∏ ÎòêÎäî Ïù¥ÎØ∏ÏßÄ ÏõåÌÑ∞ÎßàÌÅ¨Î•º Ï∂îÍ∞ÄÌï† Ïàò ÏûàÏäµÎãàÎã§. Î™®Îì† Ï≤òÎ¶¨Îäî Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏïàÏ†ÑÌïòÍ≤å Ïù¥Î£®Ïñ¥ÏßëÎãàÎã§.
                    </div>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÑ</div>
                        <div class="upload-text" data-i18n="pdfWatermark.uploadText">PDF ÌååÏùºÏùÑ ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÎìúÎûòÍ∑∏ÌïòÏÑ∏Ïöî</div>
                        <div class="upload-subtext" data-i18n="pdfWatermark.uploadSubtext">ÏßÄÏõê ÌòïÏãù: .pdf (ÏµúÎåÄ 50MB)</div>
                        <input type="file" id="fileInput" accept=".pdf" style="display:none;" />
                        <button class="tool-link recommended" type="button" onclick="document.getElementById('fileInput').click()" data-i18n="pdfWatermark.chooseFile">ÌååÏùº ÏÑ†ÌÉù</button>
                    </div>
                    <div class="file-info" id="fileInfo">
                        <div class="file-name" id="fileName"></div>
                        <div class="file-size" id="fileSize"></div>
                    </div>
                    <div class="error-message" id="errorMessage"></div>
                    <div class="watermark-options">
                        <h3 data-i18n="pdfWatermark.watermarkOptions">ÏõåÌÑ∞ÎßàÌÅ¨ ÏòµÏÖò</h3>
                        
                        <!-- ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÑπÏÖò -->
                        <div class="preview-section">
                            <h4 data-i18n="pdfWatermark.preview">ÎØ∏Î¶¨Î≥¥Í∏∞</h4>
                            <div class="preview-container">
                                <div class="preview-page" id="previewPage">
                                    <div class="preview-content">
                                        <div class="preview-text">Sample PDF Document</div>
                                        <div class="preview-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
                                        <div class="preview-text">Sed do eiusmod tempor incididunt ut labore et dolore magna.</div>
                                        <div class="preview-text">Ut enim ad minim veniam, quis nostrud exercitation.</div>
                                        <div class="preview-watermark" id="previewWatermark">
                                            <span id="previewText">WATERMARK</span>
                                            <img id="previewImage" style="display: none;" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="watermark-type">
                            <div class="type-option">
                                <input type="radio" name="watermarkType" id="textWatermark" value="text" checked>
                                <label for="textWatermark" data-i18n="pdfWatermark.textWatermark">ÌÖçÏä§Ìä∏ ÏõåÌÑ∞ÎßàÌÅ¨</label>
                            </div>
                            <div class="type-option">
                                <input type="radio" name="watermarkType" id="imageWatermark" value="image">
                                <label for="imageWatermark" data-i18n="pdfWatermark.imageWatermark">Ïù¥ÎØ∏ÏßÄ ÏõåÌÑ∞ÎßàÌÅ¨</label>
                            </div>
                        </div>
                        
                        <div class="text-watermark-options active" id="textOptions">
                            <div class="option-group">
                                <label for="watermarkText" data-i18n="pdfWatermark.watermarkText">ÏõåÌÑ∞ÎßàÌÅ¨ ÌÖçÏä§Ìä∏:</label>
                                <input type="text" id="watermarkText" placeholder="ÏõåÌÑ∞ÎßàÌÅ¨ ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" data-i18n-placeholder="pdfWatermark.textPlaceholder">
                                <small style="color: #666; font-size: 0.9em; margin-top: 5px; display: block;" data-i18n="pdfWatermark.textNote">
                                    ‚ÑπÔ∏è ÌïúÍ∏Ä/ÌäπÏàòÎ¨∏ÏûêÎäî Ïù¥ÎØ∏ÏßÄÎ°ú Î≥ÄÌôòÎêòÏñ¥ Ï≤òÎ¶¨Îê©ÎãàÎã§
                                </small>
                            </div>
                            
                            <div class="option-group">
                                <label for="textSize" data-i18n="pdfWatermark.textSize">ÌÖçÏä§Ìä∏ ÌÅ¨Í∏∞: <span class="range-value" id="textSizeValue">36px</span></label>
                                <input type="range" id="textSize" min="12" max="72" value="36" />
                            </div>
                            
                            <div class="option-group">
                                <label for="textColor" data-i18n="pdfWatermark.textColor">ÌÖçÏä§Ìä∏ ÏÉâÏÉÅ:</label>
                                <div class="color-picker-container">
                                    <div class="color-preview" id="colorPreview" style="background-color: #e74c3c;"></div>
                                    <input type="color" id="textColor" value="#e74c3c" />
                                    <div class="color-presets">
                                        <div class="color-preset" data-color="#000000" style="background-color: #000000;" title="Í≤ÄÏ†ï"></div>
                                        <div class="color-preset" data-color="#e74c3c" style="background-color: #e74c3c;" title="Îπ®Í∞ï"></div>
                                        <div class="color-preset" data-color="#3498db" style="background-color: #3498db;" title="ÌååÎûë"></div>
                                        <div class="color-preset" data-color="#2ecc71" style="background-color: #2ecc71;" title="Ï¥àÎ°ù"></div>
                                        <div class="color-preset" data-color="#f39c12" style="background-color: #f39c12;" title="Ï£ºÌô©"></div>
                                        <div class="color-preset" data-color="#9b59b6" style="background-color: #9b59b6;" title="Î≥¥Îùº"></div>
                                        <div class="color-preset" data-color="#95a5a6" style="background-color: #95a5a6;" title="ÌöåÏÉâ"></div>
                                        <div class="color-preset" data-color="#34495e" style="background-color: #34495e;" title="ÎÑ§Ïù¥ÎπÑ"></div>
                                    </div>
                                    <div class="color-hex-input">
                                        <span>#</span>
                                        <input type="text" id="hexColorInput" value="e74c3c" maxlength="6" placeholder="ffffff">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="image-watermark-options" id="imageOptions">
                            <div class="option-group">
                                <label for="watermarkImage" data-i18n="pdfWatermark.watermarkImage">ÏõåÌÑ∞ÎßàÌÅ¨ Ïù¥ÎØ∏ÏßÄ:</label>
                                <input type="file" id="watermarkImage" accept="image/*" />
                            </div>
                            
                            <div class="option-group">
                                <label for="imageSize" data-i18n="pdfWatermark.imageSize">Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞: <span class="range-value" id="imageSizeValue">100px</span></label>
                                <input type="range" id="imageSize" min="50" max="300" value="100" />
                            </div>
                        </div>
                        
                        <div class="option-group">
                            <label for="opacity" data-i18n="pdfWatermark.opacity">Ìà¨Î™ÖÎèÑ: <span class="range-value" id="opacityValue">50%</span></label>
                            <input type="range" id="opacity" min="10" max="100" value="50" />
                        </div>
                        
                        <div class="option-group">
                            <label data-i18n="pdfWatermark.position">ÏúÑÏπò:</label>
                            <div class="position-grid">
                                <button class="position-btn" data-position="top-left" data-i18n="pdfWatermark.topLeft">ÏôºÏ™Ω ÏÉÅÎã®</button>
                                <button class="position-btn" data-position="top-center" data-i18n="pdfWatermark.topCenter">Ï§ëÏïô ÏÉÅÎã®</button>
                                <button class="position-btn" data-position="top-right" data-i18n="pdfWatermark.topRight">Ïò§Î•∏Ï™Ω ÏÉÅÎã®</button>
                                <button class="position-btn" data-position="center-left" data-i18n="pdfWatermark.centerLeft">ÏôºÏ™Ω Ï§ëÏïô</button>
                                <button class="position-btn active" data-position="center" data-i18n="pdfWatermark.center">Ï§ëÏïô</button>
                                <button class="position-btn" data-position="center-right" data-i18n="pdfWatermark.centerRight">Ïò§Î•∏Ï™Ω Ï§ëÏïô</button>
                                <button class="position-btn" data-position="bottom-left" data-i18n="pdfWatermark.bottomLeft">ÏôºÏ™Ω ÌïòÎã®</button>
                                <button class="position-btn" data-position="bottom-center" data-i18n="pdfWatermark.bottomCenter">Ï§ëÏïô ÌïòÎã®</button>
                                <button class="position-btn" data-position="bottom-right" data-i18n="pdfWatermark.bottomRight">Ïò§Î•∏Ï™Ω ÌïòÎã®</button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="tool-link recommended process-btn" id="processBtn" disabled data-i18n="pdfWatermark.addWatermark">ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞ÄÌïòÍ∏∞</button>
                    <div class="progress-section" id="progressSection">
                        <div class="progress-text" id="progressText" data-i18n="pdfWatermark.processing">Ï≤òÎ¶¨ Ï§ë...</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>
                    <div class="download-section" id="downloadSection">
                        <h3 data-i18n="pdfWatermark.complete">‚úÖ ÏôÑÎ£å!</h3>
                        <p data-i18n="pdfWatermark.completeDesc">PDF ÌååÏùºÏóê ÏõåÌÑ∞ÎßàÌÅ¨Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.</p>
                        <a href="#" class="tool-link recommended download-btn" id="downloadBtn" data-i18n="pdfWatermark.downloadBtn">üì• PDF Îã§Ïö¥Î°úÎìú</a>
                        <button class="tool-link" type="button" onclick="window.location.reload()" data-i18n="pdfWatermark.clearResults">üóëÔ∏è Í≤∞Í≥º ÏßÄÏö∞Í∏∞</button>
                    </div>
                </div>
            </div>
            <div class="guide-section">
                <h4 data-i18n="pdfWatermark.guideTitle">üí° ÏÇ¨Ïö© Í∞ÄÏù¥Îìú</h4>
                <ul>
                    <li>PDF ÌååÏùºÏùÑ ÏóÖÎ°úÎìúÌïòÎ©¥ Î™®Îì† ÌéòÏù¥ÏßÄÏóê ÏõåÌÑ∞ÎßàÌÅ¨Í∞Ä Ï∂îÍ∞ÄÎê©ÎãàÎã§.</li>
                    <li>ÌÖçÏä§Ìä∏/Ïù¥ÎØ∏ÏßÄ, ÌÅ¨Í∏∞, ÏÉâÏÉÅ, ÏúÑÏπò, Ìà¨Î™ÖÎèÑ Îì± Îã§ÏñëÌïú ÏòµÏÖòÏùÑ ÏÑ§Ï†ïÌï† Ïàò ÏûàÏäµÎãàÎã§.</li>
                    <li>ÏôÑÎ£å ÌõÑ PDFÎ•º Îã§Ïö¥Î°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§.</li>
                </ul>
            </div>
            <div class="features-section">
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.privacy.title">Í∞úÏù∏Ï†ïÎ≥¥ Î≥¥Ìò∏</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.privacy.description">Î™®Îì† Ï≤òÎ¶¨Îäî Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú ÏßÅÏ†ë ÏàòÌñâÎêòÏñ¥ ÌååÏùºÏù¥ ÏÑúÎ≤ÑÎ°ú Ï†ÑÏÜ°ÎêòÏßÄ ÏïäÏäµÎãàÎã§.</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.fast.title">Îπ†Î•∏ Ï≤òÎ¶¨</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.fast.description">ÏµúÏ†ÅÌôîÎêú ÏïåÍ≥†Î¶¨Ï¶òÏúºÎ°ú Îπ†Î•¥Í≥† Ï†ïÌôïÌïú ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞ÄÎ•º Ï†úÍ≥µÌï©ÎãàÎã§.</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üé®</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.customizable.title">Îã§ÏñëÌïú ÏòµÏÖò</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.customizable.description">ÌÖçÏä§Ìä∏ÏôÄ Ïù¥ÎØ∏ÏßÄ ÏõåÌÑ∞ÎßàÌÅ¨, ÏúÑÏπò, ÌÅ¨Í∏∞, Ìà¨Î™ÖÎèÑ Îì±ÏùÑ ÏûêÏú†Î°≠Í≤å ÏÑ§Ï†ïÌï† Ïàò ÏûàÏäµÎãàÎã§.</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <div class="feature-title" data-i18n="pdfWatermark.features.responsive.title">Î™®Îì† Í∏∞Í∏∞ ÏßÄÏõê</div>
                    <div class="feature-description" data-i18n="pdfWatermark.features.responsive.description">PC, ÌÉúÎ∏îÎ¶ø, Î™®Î∞îÏùº Îì± Î™®Îì† Í∏∞Í∏∞ÏóêÏÑú ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class PDFWatermarkTool {
            constructor() {
                this.currentFile = null;
                this.selectedPosition = 'center';
                this.initializeElements();
                this.bindEvents();
                this.updateRangeValues();
                this.updateColorPreview(); // Ï¥àÍ∏∞ ÏÉâÏÉÅ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÑ§Ï†ï
                this.updatePreview(); // Ï¥àÍ∏∞ ÎØ∏Î¶¨Î≥¥Í∏∞ ÏÑ§Ï†ï
            }
            
            initializeElements() {
                // Í∏∞Î≥∏ ÏöîÏÜåÎì§
                this.uploadArea = document.getElementById('uploadArea');
                this.fileInput = document.getElementById('fileInput');
                this.fileInfo = document.getElementById('fileInfo');
                this.fileName = document.getElementById('fileName');
                this.fileSize = document.getElementById('fileSize');
                this.processBtn = document.getElementById('processBtn');
                this.progressSection = document.getElementById('progressSection');
                this.progressText = document.getElementById('progressText');
                this.progressFill = document.getElementById('progressFill');
                this.downloadSection = document.getElementById('downloadSection');
                this.downloadBtn = document.getElementById('downloadBtn');
                this.errorMessage = document.getElementById('errorMessage');
                
                // Watermark option elements
                this.textWatermark = document.getElementById('textWatermark');
                this.imageWatermark = document.getElementById('imageWatermark');
                this.textOptions = document.getElementById('textOptions');
                this.imageOptions = document.getElementById('imageOptions');
                this.watermarkText = document.getElementById('watermarkText');
                this.textSize = document.getElementById('textSize');
                this.textColor = document.getElementById('textColor');
                this.watermarkImage = document.getElementById('watermarkImage');
                this.imageSize = document.getElementById('imageSize');
                this.opacity = document.getElementById('opacity');
                
                // Position buttons
                this.positionButtons = document.querySelectorAll('.position-btn');
                
                // Preview elements
                this.previewWatermark = document.getElementById('previewWatermark');
                this.previewText = document.getElementById('previewText');
                this.previewImage = document.getElementById('previewImage');
                
                // Color picker elements
                this.colorPreview = document.getElementById('colorPreview');
                this.hexColorInput = document.getElementById('hexColorInput');
                this.colorPresets = document.querySelectorAll('.color-preset');
                
                // Ï¥àÍ∏∞Ìôî ÌôïÏù∏
                console.log('Elements initialized:', {
                    textSize: !!this.textSize,
                    imageSize: !!this.imageSize,
                    opacity: !!this.opacity,
                    previewText: !!this.previewText,
                    previewImage: !!this.previewImage
                });
            }
            
            bindEvents() {
                // File input events
                this.uploadArea.addEventListener('click', () => this.fileInput.click());
                this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                
                // Drag and drop events
                this.uploadArea.addEventListener('dragover', (e) => this.handleDragOver(e));
                this.uploadArea.addEventListener('dragleave', (e) => this.handleDragLeave(e));
                this.uploadArea.addEventListener('drop', (e) => this.handleDrop(e));
                
                // Watermark type change
                this.textWatermark.addEventListener('change', () => {
                    this.toggleWatermarkType();
                    this.updatePreview();
                });
                this.imageWatermark.addEventListener('change', () => {
                    this.toggleWatermarkType();
                    this.updatePreview();
                });
                
                // Text input changes
                this.watermarkText.addEventListener('input', () => this.updatePreview());
                this.textColor.addEventListener('input', () => {
                    this.updateColorPreview();
                    this.updatePreview();
                });
                this.watermarkImage.addEventListener('change', () => this.updatePreview());
                
                // Color picker events
                this.colorPreview.addEventListener('click', () => this.textColor.click());
                this.hexColorInput.addEventListener('input', (e) => this.handleHexInput(e));
                this.colorPresets.forEach(preset => {
                    preset.addEventListener('click', (e) => this.selectColorPreset(e));
                });
                
                // Range inputs - ÏïàÏ†ÑÌïòÍ≤å Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
                if (this.textSize) {
                    this.textSize.addEventListener('input', (e) => {
                        console.log('Text size changed:', e.target.value);
                        this.updateRangeValues();
                        this.updatePreview();
                    });
                }
                if (this.imageSize) {
                    this.imageSize.addEventListener('input', (e) => {
                        console.log('Image size changed:', e.target.value);
                        this.updateRangeValues();
                        this.updatePreview();
                    });
                }
                if (this.opacity) {
                    this.opacity.addEventListener('input', (e) => {
                        console.log('Opacity changed:', e.target.value);
                        this.updateRangeValues();
                        this.updatePreview();
                    });
                }
                
                // Position buttons
                this.positionButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.selectPosition(btn);
                        this.updatePreview();
                    });
                });
                
                // Process button
                this.processBtn.addEventListener('click', () => this.processWatermark());
            }
            
            updateRangeValues() {
                // ÏïàÏ†ÑÌïòÍ≤å ÏöîÏÜåÎ•º Ï∞æÍ≥† ÏóÖÎç∞Ïù¥Ìä∏
                const textSizeValue = document.getElementById('textSizeValue');
                const imageSizeValue = document.getElementById('imageSizeValue');
                const opacityValue = document.getElementById('opacityValue');
                
                if (textSizeValue && this.textSize) {
                    textSizeValue.textContent = this.textSize.value + 'px';
                }
                if (imageSizeValue && this.imageSize) {
                    imageSizeValue.textContent = this.imageSize.value + 'px';
                }
                if (opacityValue && this.opacity) {
                    opacityValue.textContent = this.opacity.value + '%';
                }
            }
            
            updatePreview() {
                const isTextWatermark = this.textWatermark.checked;
                
                if (isTextWatermark) {
                    this.updateTextPreview();
                } else {
                    this.updateImagePreview();
                }
                
                this.updateWatermarkPosition();
            }
            
            updateTextPreview() {
                const text = this.watermarkText.value || 'WATERMARK';
                const fontSize = parseInt(this.textSize.value);
                const color = this.textColor.value;
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                // ÎØ∏Î¶¨Î≥¥Í∏∞Ïö© ÌÅ¨Í∏∞ Ï°∞Ï†ï (Ïã§Ï†ú ÌÅ¨Í∏∞Ïùò 60% Ï†ïÎèÑÎ°ú Ïä§ÏºÄÏùºÎßÅ)
                const previewFontSize = Math.max(fontSize * 0.5, 12);
                
                console.log('UpdateTextPreview called:', { text, fontSize, previewFontSize, color, opacity });
                
                // ÏôÑÏ†ÑÌûà ÏÉàÎ°úÏö¥ span ÏöîÏÜå ÏÉùÏÑ±
                const newSpan = document.createElement('span');
                newSpan.id = 'previewText';
                newSpan.textContent = text;
                
                // ÏßÅÏ†ë Ïä§ÌÉÄÏùº Ï†ÅÏö© (CSS Ïö∞ÏÑ†ÏàúÏúÑ Î¨¥Ïãú)
                newSpan.style.fontFamily = 'Arial, sans-serif';
                newSpan.style.fontSize = `${previewFontSize}px`;
                newSpan.style.color = color;
                newSpan.style.opacity = opacity;
                newSpan.style.whiteSpace = 'nowrap';
                newSpan.style.textShadow = '1px 1px 3px rgba(0,0,0,0.3)';
                newSpan.style.fontWeight = 'bold';
                newSpan.style.display = 'block';
                newSpan.style.position = 'absolute';
                newSpan.style.top = '0';
                newSpan.style.left = '0';
                newSpan.style.width = '100%';
                newSpan.style.height = '100%';
                newSpan.style.display = 'flex';
                newSpan.style.alignItems = 'center';
                newSpan.style.justifyContent = 'center';
                
                // Í∏∞Ï°¥ ÏöîÏÜå Ï†úÍ±∞ÌïòÍ≥† ÏÉà ÏöîÏÜå Ï∂îÍ∞Ä
                this.previewText.parentNode.replaceChild(newSpan, this.previewText);
                this.previewText = newSpan;
                
                this.previewImage.style.display = 'none';
                
                console.log('Text preview updated with new element');
            }
            
            updateImagePreview() {
                const imageFile = this.watermarkImage.files[0];
                const imageSize = parseInt(this.imageSize.value);
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                console.log('UpdateImagePreview called:', { imageFile: !!imageFile, imageSize, opacity });
                
                if (imageFile) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        // ÎØ∏Î¶¨Î≥¥Í∏∞Ïö© ÌÅ¨Í∏∞ Ï°∞Ï†ï (Ïã§Ï†ú ÌÅ¨Í∏∞Ïùò 50% Ï†ïÎèÑÎ°ú Ïä§ÏºÄÏùºÎßÅ)
                        const previewSize = Math.max(imageSize * 0.5, 30);
                        
                        console.log('Image preview size:', previewSize);
                        
                        // ÏôÑÏ†ÑÌûà ÏÉàÎ°úÏö¥ img ÏöîÏÜå ÏÉùÏÑ±
                        const newImg = document.createElement('img');
                        newImg.id = 'previewImage';
                        newImg.src = e.target.result;
                        
                        // ÏßÅÏ†ë Ïä§ÌÉÄÏùº Ï†ÅÏö©
                        newImg.setAttribute('style', `
                            width: ${previewSize}px;
                            height: ${previewSize}px;
                            opacity: ${opacity};
                            display: block;
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                        `);
                        
                        // Í∏∞Ï°¥ ÏöîÏÜå Ï†úÍ±∞ÌïòÍ≥† ÏÉà ÏöîÏÜå Ï∂îÍ∞Ä
                        this.previewImage.parentNode.replaceChild(newImg, this.previewImage);
                        this.previewImage = newImg;
                        
                        this.previewText.style.display = 'none';
                        
                        console.log('Image preview updated with new element');
                    };
                    reader.readAsDataURL(imageFile);
                } else {
                    this.previewImage.style.display = 'none';
                    this.previewText.style.display = 'none';
                }
            }
            
            updateWatermarkPosition() {
                const position = this.selectedPosition;
                const container = this.previewWatermark;
                
                // Í∏∞Î≥∏Í∞í Ï¥àÍ∏∞Ìôî
                container.style.top = '50%';
                container.style.left = '50%';
                container.style.transform = 'translate(-50%, -50%) rotate(-45deg)';
                
                // ÏúÑÏπòÎ≥Ñ Ï°∞Ï†ï
                switch (position) {
                    case 'top-left':
                        container.style.top = '25%';
                        container.style.left = '25%';
                        break;
                    case 'top-center':
                        container.style.top = '25%';
                        container.style.left = '50%';
                        break;
                    case 'top-right':
                        container.style.top = '25%';
                        container.style.left = '75%';
                        break;
                    case 'center-left':
                        container.style.top = '50%';
                        container.style.left = '25%';
                        break;
                    case 'center':
                        container.style.top = '50%';
                        container.style.left = '50%';
                        break;
                    case 'center-right':
                        container.style.top = '50%';
                        container.style.left = '75%';
                        break;
                    case 'bottom-left':
                        container.style.top = '75%';
                        container.style.left = '25%';
                        break;
                    case 'bottom-center':
                        container.style.top = '75%';
                        container.style.left = '50%';
                        break;
                    case 'bottom-right':
                        container.style.top = '75%';
                        container.style.left = '75%';
                        break;
                }
            }
            
            toggleWatermarkType() {
                if (this.textWatermark.checked) {
                    this.textOptions.classList.add('active');
                    this.imageOptions.classList.remove('active');
                } else {
                    this.textOptions.classList.remove('active');
                    this.imageOptions.classList.add('active');
                }
            }
            
            selectPosition(btn) {
                this.positionButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                this.selectedPosition = btn.dataset.position;
            }
            
            // ÏÉâÏÉÅ Í¥ÄÎ†® Î©îÏÜåÎìúÎì§
            updateColorPreview() {
                const color = this.textColor.value;
                this.colorPreview.style.backgroundColor = color;
                this.hexColorInput.value = color.substring(1);
                this.updateColorPresetSelection(color);
            }
            
            updateColorPresetSelection(color) {
                this.colorPresets.forEach(preset => {
                    preset.classList.remove('active');
                    if (preset.dataset.color.toLowerCase() === color.toLowerCase()) {
                        preset.classList.add('active');
                    }
                });
            }
            
            selectColorPreset(e) {
                const color = e.target.dataset.color;
                this.textColor.value = color;
                this.updateColorPreview();
                this.updatePreview();
            }
            
            handleHexInput(e) {
                let hex = e.target.value.replace(/[^0-9a-fA-F]/g, '');
                if (hex.length > 6) {
                    hex = hex.substring(0, 6);
                }
                e.target.value = hex;
                
                if (hex.length === 6) {
                    const color = '#' + hex;
                    this.textColor.value = color;
                    this.colorPreview.style.backgroundColor = color;
                    this.updateColorPresetSelection(color);
                    this.updatePreview();
                }
            }
            
            handleDragOver(e) {
                e.preventDefault();
                this.uploadArea.classList.add('dragover');
            }
            
            handleDragLeave(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
            }
            
            handleDrop(e) {
                e.preventDefault();
                this.uploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    this.processFile(files[0]);
                }
            }
            
            handleFileSelect(e) {
                const file = e.target.files[0];
                if (file) {
                    this.processFile(file);
                }
            }
            
            processFile(file) {
                this.hideError();
                
                // Validate file type
                if (!file.type.includes('pdf')) {
                    this.showError('PDF ÌååÏùºÎßå ÏóÖÎ°úÎìúÌï† Ïàò ÏûàÏäµÎãàÎã§.');
                    return;
                }
                
                // Validate file size (50MB limit)
                if (file.size > 50 * 1024 * 1024) {
                    this.showError('ÌååÏùº ÌÅ¨Í∏∞Í∞Ä 50MBÎ•º Ï¥àÍ≥ºÌï©ÎãàÎã§.');
                    return;
                }
                
                this.currentFile = file;
                this.displayFileInfo(file);
                this.processBtn.disabled = false;
            }
            
            displayFileInfo(file) {
                this.fileName.textContent = file.name;
                this.fileSize.textContent = this.formatFileSize(file.size);
                this.fileInfo.style.display = 'block';
            }
            
            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            showError(message) {
                this.errorMessage.textContent = message;
                this.errorMessage.style.display = 'block';
            }
            
            hideError() {
                this.errorMessage.style.display = 'none';
            }
            
            updateProgress(percent, text) {
                this.progressFill.style.width = percent + '%';
                this.progressText.textContent = text;
            }
            
            async processWatermark() {
                if (!this.currentFile) return;
                
                this.processBtn.disabled = true;
                this.progressSection.style.display = 'block';
                this.downloadSection.style.display = 'none';
                this.hideError();
                
                try {
                    this.updateProgress(10, 'PDF ÌååÏùº Î°úÎî© Ï§ë...');
                    
                    // Read PDF file
                    const pdfBytes = await this.readFile(this.currentFile);
                    
                    this.updateProgress(30, 'PDF Î¨∏ÏÑú ÌååÏã± Ï§ë...');
                    
                    // Load PDF document
                    const pdfDoc = await PDFLib.PDFDocument.load(pdfBytes);
                    
                    this.updateProgress(50, 'ÏõåÌÑ∞ÎßàÌÅ¨ Ï∂îÍ∞Ä Ï§ë...');
                    
                    // Add watermark to all pages
                    if (this.textWatermark.checked) {
                        await this.addTextWatermark(pdfDoc);
                    } else {
                        await this.addImageWatermark(pdfDoc);
                    }
                    
                    this.updateProgress(80, 'PDF ÏÉùÏÑ± Ï§ë...');
                    
                    // Save PDF
                    const pdfBytesWithWatermark = await pdfDoc.save();
                    
                    this.updateProgress(100, 'ÏôÑÎ£å!');
                    
                    // Show download section
                    this.showDownloadSection(pdfBytesWithWatermark);
                    
                } catch (error) {
                    console.error('ÏõåÌÑ∞ÎßàÌÅ¨ Ï≤òÎ¶¨ Ï§ë Ïò§Î•ò:', error);
                    this.showError('ÏõåÌÑ∞ÎßàÌÅ¨ Ï≤òÎ¶¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ' + error.message);
                } finally {
                    this.processBtn.disabled = false;
                    this.progressSection.style.display = 'none';
                }
            }
            
            async readFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(new Uint8Array(e.target.result));
                    reader.onerror = () => reject(new Error('ÌååÏùº ÏùΩÍ∏∞ Ïã§Ìå®'));
                    reader.readAsArrayBuffer(file);
                });
            }
            
            async addTextWatermark(pdfDoc) {
                const pages = pdfDoc.getPages();
                const text = this.watermarkText.value || 'WATERMARK';
                const fontSize = parseInt(this.textSize.value);
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                // Parse color
                const color = this.hexToRgb(this.textColor.value);
                
                // Check if text contains non-ASCII characters (like Korean)
                const hasNonAscii = /[^\x00-\x7F]/.test(text);
                
                let font;
                try {
                    if (hasNonAscii) {
                        // For non-ASCII text, try to use a Unicode-compatible approach
                        // Since we can't easily embed custom fonts, we'll use a different method
                        await this.addTextAsImageWatermark(pdfDoc, text, fontSize, color, opacity);
                        return;
                    } else {
                        // For ASCII text, use standard font
                        font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);
                    }
                } catch (error) {
                    console.warn('Font embedding failed, using default font:', error);
                    font = await pdfDoc.embedFont(PDFLib.StandardFonts.Helvetica);
                }
                
                for (const page of pages) {
                    const { width, height } = page.getSize();
                    const position = this.calculatePosition(width, height, fontSize, text.length);
                    
                    page.drawText(text, {
                        x: position.x,
                        y: position.y,
                        size: fontSize * 5,
                        font: font,
                        color: PDFLib.rgb(color.r / 255, color.g / 255, color.b / 255),
                        opacity: opacity,
                        rotate: PDFLib.degrees(45)
                    });
                }
            }
            
            async addTextAsImageWatermark(pdfDoc, text, fontSize, color, opacity) {
                // Create a canvas to render text as image for non-ASCII characters
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Set up canvas size and font
                ctx.font = `${fontSize * 5}px Arial, sans-serif`;
                const textMetrics = ctx.measureText(text);
                const textWidth = textMetrics.width;
                const textHeight = fontSize;
                
                // Set canvas size with some padding
                canvas.width = textWidth + 40;
                canvas.height = textHeight + 40;
                
                // Clear canvas and set font again (canvas size change resets context)
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.font = `${fontSize * 5}px Arial, sans-serif`;
                ctx.fillStyle = `rgb(${color.r}, ${color.g}, ${color.b})`;
                ctx.textBaseline = 'middle';
                ctx.textAlign = 'center';
                
                // Draw text on canvas
                ctx.fillText(text, canvas.width / 2, canvas.height / 2);
                
                // Convert canvas to PNG data
                const pngDataUrl = canvas.toDataURL('image/png');
                const pngData = pngDataUrl.split(',')[1];
                const pngBytes = Uint8Array.from(atob(pngData), c => c.charCodeAt(0));
                
                // Embed the PNG image
                const image = await pdfDoc.embedPng(pngBytes);
                
                // Add image to all pages
                const pages = pdfDoc.getPages();
                for (const page of pages) {
                    const { width, height } = page.getSize();
                    const position = this.calculatePosition(width, height, canvas.width, canvas.height);
                    
                    page.drawImage(image, {
                        x: position.x,
                        y: position.y,
                        width: canvas.width,
                        height: canvas.height,
                        opacity: opacity,
                        rotate: PDFLib.degrees(45)
                    });
                }
            }
            
            async addImageWatermark(pdfDoc) {
                const imageFile = this.watermarkImage.files[0];
                if (!imageFile) {
                    throw new Error('Ïù¥ÎØ∏ÏßÄ ÌååÏùºÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                }
                
                const imageBytes = await this.readFile(imageFile);
                let image;
                
                if (imageFile.type.includes('png')) {
                    image = await pdfDoc.embedPng(imageBytes);
                } else if (imageFile.type.includes('jpeg') || imageFile.type.includes('jpg')) {
                    image = await pdfDoc.embedJpg(imageBytes);
                } else {
                    throw new Error('PNG ÎòêÎäî JPG Ïù¥ÎØ∏ÏßÄÎßå ÏßÄÏõêÎê©ÎãàÎã§.');
                }
                
                const pages = pdfDoc.getPages();
                const imageSize = parseInt(this.imageSize.value);
                const opacity = (110 - parseInt(this.opacity.value)) / 100;
                
                for (const page of pages) {
                    const { width, height } = page.getSize();
                    const position = this.calculatePosition(width, height, imageSize, imageSize);
                    
                    page.drawImage(image, {
                        x: position.x,
                        y: position.y,
                        width: imageSize,
                        height: imageSize,
                        opacity: opacity
                    });
                }
            }
            
            calculatePosition(pageWidth, pageHeight, elementWidth, elementHeight) {
                const positions = {
                    'top-left': { x: 50, y: pageHeight - elementHeight - 50 },
                    'top-center': { x: (pageWidth - elementWidth) / 2, y: pageHeight - elementHeight - 50 },
                    'top-right': { x: pageWidth - elementWidth - 50, y: pageHeight - elementHeight - 50 },
                    'center-left': { x: 50, y: (pageHeight - elementHeight) / 2 },
                    'center': { x: (pageWidth - elementWidth) / 2, y: (pageHeight - elementHeight) / 2 },
                    'center-right': { x: pageWidth - elementWidth - 50, y: (pageHeight - elementHeight) / 2 },
                    'bottom-left': { x: 50, y: 50 },
                    'bottom-center': { x: (pageWidth - elementWidth) / 2, y: 50 },
                    'bottom-right': { x: pageWidth - elementWidth - 50, y: 50 }
                };
                
                return positions[this.selectedPosition] || positions['center'];
            }
            
            hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : { r: 255, g: 0, b: 0 };
            }
            
            showDownloadSection(pdfBytes) {
                const blob = new Blob([pdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                const fileName = this.currentFile.name.replace(/\.pdf$/i, '_watermarked.pdf');
                
                this.downloadBtn.href = url;
                this.downloadBtn.download = fileName;
                this.downloadSection.style.display = 'block';
                
                // Clean up URL after download
                this.downloadBtn.addEventListener('click', () => {
                    setTimeout(() => URL.revokeObjectURL(url), 100);
                });
            }
        }
        
        // Initialize tool
        document.addEventListener('DOMContentLoaded', () => {
            new PDFWatermarkTool();
        });
        
        // Mobile menu toggle
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }
        
        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            const navBar = document.querySelector('.nav-bar');
            const navLinks = document.getElementById('navLinks');
            if (!navBar.contains(e.target) && navLinks.classList.contains('active')) {
                navLinks.classList.remove('active');
            }
        });
        
        // Close menu when window is resized
        window.addEventListener('resize', function() {
            const navLinks = document.getElementById('navLinks');
            if (window.innerWidth > 768) {
                navLinks.classList.remove('active');
            }
        });
    </script>
    <script src="../../js/utils/nav-loader.js"></script>
</body>
</html>